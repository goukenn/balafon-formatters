{
    "scopeName":"source.bcss",
    "comment":"bcss formatter",
    "repository":{
        "skip-multispace":{
            "name":"meta.join.multispace.bcss",
            "match":"\\s+",
            "replaceWith":" "
        },
        "global-block":{
            "begin":"(\\{)",
            "end":"(\\})",
            "isBlock":true,
            "name":"meta.global.block.bcss",
            "patterns":[
                {"match":"\\s*\\b([\\w]+)\\b\\s*",
                "transform":["trim", "[$0]"]},

                {"match":"\\s*(:)\\s*",
                "transform":["trim", "[$0]"]},
                {"include":"#skip-multispace"},
                {"include":"#global-block"},
                {
                    "name":"instruction.separator",
                    "match":"(;)",
                    "isInstructionSeparator":true,
                    "lineFeed":true
                }
            ]
        },
        "media-directive":{
            "name":"meta.media.directive.bcss",
            "begin":"\\s*(@\\b(?:def|(x(x)?)?(sm|lg)(-screen)?|root))\\b",
            "end":"(?=\\{|\\}|;|@|\\S)",
            "endOnBlockClosed":true,
            "beginCaptures":{
                "1":{"className":"directive"}
            },
            "patterns":[
                {"include":"#global-block"}
            ]
        }
    },
    "patterns":[ 
        {"include":"#skip-multispace"},
        {"include":"#global-block"},
        {"include":"#media-directive"}
    ]
}