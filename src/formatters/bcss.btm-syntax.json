{
    "scopeName":"source.bcss",
    "comment":"balafon .bcss formatter",
    "debug":true,
    "repository":{
        "skip-multispace":{
            "name":"meta.join.multispace.bcss",
            "match":"\\s+",
            "replaceWith":" "
        },
        "global-block":{
            "begin":"(\\{)",
            "end":"(\\})",
            "isBlock":true,
            "name":"meta.global.block.bcss",
            "patterns":[
                {"match":"\\s*\\b([\\w]+)\\b\\s*",
                "transform":["trim", "[$0]"]},

                {"match":"\\s*(:)\\s*",
                "transform":["trim", "[$0]"]},
                {"include":"#skip-multispace"},
                {"include":"#global-block"},
                {
                    "name":"instruction.separator",
                    "match":"(;)",
                    "isInstructionSeparator":true,
                    "lineFeed":true
                }
            ]
        },
        "media-directive":{
            "name":"meta.media.directive.bcss",
            "begin":"\\s*(@\\b(?:def|(x(x)?)?(sm|lg)(-screen)?|root))\\b",
            "end":"(?=\\{|\\}|;|@|\\S)",
            "endOnBlockClosed":true,
            "beginCaptures":{
                "1":{"className":"directive"}
            },
            "patterns":[
                {"include":"#global-block"}
            ]
        },
        "describ-comment": {
            "name": "comment.describ.comment.bcss",
            "begin": "^\\s*#\\s+",
            "end": "$",
            "patterns": [
                {
                    "match":"(?=\\s*\\n\\s*)",
                    "name":"match.line.feed.bcss",
                    "closeParent":{
                        "value":"$",
                        "type":"error.info",
                        "className":"m-status-class",
                        "tokenID":"single-line"
                    }
                },
                {
                    "match": "([\\w\\-]+)(\\s+[\\w\\-]+)+",
                    "captures": {
                        "1": {
                            "name": "directive.name.bcss",
                            "className": "describ-name"
                        },
                        "2": {
                            "name": "directive.value.bcss",
                            "className": "describ-value",
                            "patterns": [
                                {
                                    "include": "#value-definition"
                                }
                            ]
                        }
                    }
                }
            ],
            "tokenID": "describ-comment",
            "className": "comment",
            "formattingMode": 1
        }
    },
    "patterns":[ 
        {
            "include": "#single-line-comment"
        },
        {
            "include": "#describ-comment"
        },
        {"include":"#skip-multispace"},
        {"include":"#global-block"},
        {"include":"#media-directive"}
    ]
}